<div class="modal-backdrop" (click)="closeModal()">
  <div class="modal" (click)="stopPropagation($event)">
    <div class="modal-header">
      <h2>Đăng nhập vào RoomFinder</h2>
      <span class="modal-close" (click)="closeModal()" aria-label="Đóng modal">✕</span>
    </div>

    <div class="modal-content">
      <p class="text-center text-gray-600 mb-6">Chỉ mất 3 giây để bắt đầu tìm phòng phù hợp</p>

      <!-- Error message -->
      <div
        *ngIf="errorMessage"
        class="mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-600 text-sm"
      >
        {{ errorMessage }}
      </div>

      <!-- Loading indicator -->
      <div *ngIf="isLoading" class="mb-4 text-center">
        <div
          class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-[#00C897]"
        ></div>
        <p class="mt-2 text-gray-600">Đang xử lý...</p>
      </div>

      <!-- Form đăng nhập -->
      <div class="space-y-4 mt-6">
        <!-- Google Sign-In Button -->
        <button
          type="button"
          (click)="loginWithGoogle()"
          class="w-full h-12 flex items-center justify-center gap-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition"
        >
          <img src="/assets/google.png" alt="Google" class="w-5 h-5" />
          <span class="font-medium text-gray-700"> Tiếp tục với Google </span>
        </button>

        <button
          type="button"
          (click)="handleFacebookLogin()"
          class="w-full h-12 flex items-center justify-center gap-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition"
        >
          <img src="/assets/facebook.png" alt="Facebook" class="w-5 h-5" />
          <span class="font-medium text-gray-700"> Tiếp tục với Facebook </span>
        </button>

        <!-- Phân cách -->
        <div class="relative flex items-center my-4">
          <div class="flex-grow border-t border-gray-300"></div>
          <span class="px-4 text-gray-500 text-sm">hoặc</span>
          <div class="flex-grow border-t border-gray-300"></div>
        </div>

        <!-- Form email/password -->
        <form (ngSubmit)="onPhoneLogin()" class="space-y-4">
          <div>
            <label for="phone" class="block text-sm font-medium text-gray-700 mb-1">
              Số điện thoại
            </label>
            <input
              id="phone"
              type="tel"
              [(ngModel)]="phone"
              name="phone"
              placeholder="Nhập số điện thoại của bạn"
              class="w-full p-3 border border-gray-300 rounded-lg focus:border-[#00C897] focus:ring-2 focus:ring-[#00C897]/30 outline-none transition-all"
              [disabled]="isLoading"
              required
            />
          </div>

          <button
            type="submit"
            class="w-full py-3 bg-[#00C897] text-white rounded-lg font-bold hover:bg-[#00b587] transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
            [disabled]="isLoading"
          >
            Tiếp tục
          </button>
        </form>
      </div>
    </div>
  </div>
</div>
